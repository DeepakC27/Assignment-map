$(document).ready(function() {
  $('#side_menu_btn').click(function() {
    $('.sidenav').css({
      width: "100%",
      opacity: "0.96"
    });
  })

  $('.closebtn').click(function() {
    $('.sidenav').css({
      width: "0"
    });
  });

  $(window).on('resize', function(event) {
    var map_h = $('.panel').height();
    setHeight(map_h);
  });
  $(window).on('load', function(event) {
    var map_h = $('.panel').height();
    setHeight(map_h);
  });

});

function setHeight(height) {
  $('#map').css({
    height: height + 10 + "px"
  });
}

/*
var isMomHappy = true;
// Promise
var willIGetNewPhone = new Promise(
    function (resolve, reject) {
        if (isMomHappy) {
            var phone = {
                brand: 'Samsung',
                color: 'black'
            };
            resolve(phone);
        } else {
            var reason = new Error('mom is not happy');
            reject(reason);
        }

    }
);


call our promise
var askMom = function () {
    willIGetNewPhone
        .then(function (fulfilled) {
            // yay, you got a new phone
            console.log(fulfilled);
        })
        .catch(function (error) {
            // ops, mom don't buy it
            console.log(error.message);
        });
}
*/

function initMap() {
  var directionsService = new google.maps.DirectionsService;
  if(directionsService){
    alert('working');
  }
  else{
    alert('not working');
  }
  var directionsDisplay = new google.maps.DirectionsRenderer;
  var map = new google.maps.Map(document.getElementById('map'), {
    center: {
      lat: 19.2183,
      lng: 72.9781
    },
    mapTypeId: google.maps.MapTypeId.ROADMAP,
    disableDefaultUI: true,
    styles: [{
      "stylers": [{
        "saturation": -100
      }]
    }, {
      "featureType": "water",
      "elementType": "geometry.fill",
      "stylers": [{
        "color": "#00BFFF",
        "border-color": "black"
      }]
    }, {
      "featureType": "poi.park",
      "elementType": "geometry.fill",
      "stylers": [{
        "color": "#aadd55"
      }]
    }, {
      "featureType": "road.highway",
      "elementType": "labels",
      "stylers": [{
        "visibility": "on"
      }]
    }]
  });
  directionsDisplay.setMap(map);
  calculateAndDisplayRoute(directionsService, directionsDisplay);
}

function calculateAndDisplayRoute(directionsService, directionsDisplay) {
  directionsService.route({
    origin: {
      lat: 18.9398,
      lng: 72.8355
    },
    destination: {
      lat: 19.0896,
      lng: 72.8656
    },
    travelMode: 'TRANSIT',
    drivingOptions: {
      departureTime: new Date(Date.now()),
      trafficModel: 'bestguess'
    },
    unitSystem: google.maps.UnitSystem.METRIC
  }, function(response, status) {
    if (status === 'OK') {
      directionsDisplay.setDirections(response);
    } else {
      window.alert('Directions request failed due to ' + status);
    }
  });
}