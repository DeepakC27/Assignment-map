$(document).ready(function() {

  var side_nave = $('.sidenav'),
    panel_h = $('.panel');

  $('#side_menu_btn').click(function() {
    $(side_nave).css({
      width: "100%",
      opacity: "0.96"
    });
  })

  $('.closebtn').click(function() {
    $(side_nave).css({
      width: "0"
    });
  });

  $(window).on('resize', function(event) {
    var map_h = $(panel_h).height();
    setHeight(map_h);
  });
  $(window).on('load', function(event) {
    var map_h = $(panel_h).height();
    setHeight(map_h);
  });

});

function setHeight(height) {
  $('#map').css({
    height: height + 10 + "px"
  });
}


function show_snackbar(val) {
  var x = document.getElementById("snackbar")
  x.className = "show";
  setTimeout(function() {
    x.className = x.className.replace("show", "");
  }, 3000);
}

function initMap() {
  var directionsService = new google.maps.DirectionsService;
  var directionsDisplay = new google.maps.DirectionsRenderer;
  var map = new google.maps.Map(document.getElementById('map'), {
    center: {
      lat: 19.2183,
      lng: 72.9781
    },
    mapTypeId: google.maps.MapTypeId.ROADMAP,
    disableDefaultUI: true,
    styles: [{
      "stylers": [{
        "saturation": -100
      }]
    }, {
      "featureType": "water",
      "elementType": "geometry.fill",
      "stylers": [{
        "color": "#00BFFF"
      }]
    }, {
      "featureType": "poi.park",
      "elementType": "geometry.fill",
      "stylers": [{
        "color": "#aadd55"
      }]
    }, {
      "featureType": "road.highway",
      "elementType": "labels",
      "stylers": [{
        "visibility": "on"
      }]
    }]
  });
  directionsDisplay.setMap(map);
  calculateAndDisplayRoute(directionsService, directionsDisplay);
}

function calculateAndDisplayRoute(directionsService, directionsDisplay) {
  directionsService.route({
    origin: {
      lat: 18.9398,
      lng: 72.8355
    },
    destination: {
      lat: 19.0896,
      lng: 72.8656
    },
    travelMode: 'TRANSIT',
    drivingOptions: {
      departureTime: new Date(Date.now()),
      trafficModel: 'bestguess'
    },
    unitSystem: google.maps.UnitSystem.METRIC
  }, function(response, status) {
    if (status === 'OK') {
      directionsDisplay.setDirections(response);
    } else {
      window.alert('Directions request failed due to ' + status);
    }
  });
}